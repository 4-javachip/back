# back

## ğŸ“š í”„ë¡œì íŠ¸ ê°œìš”
ì‹ ì„¸ê³„ I&C ìŠ¤íŒŒë¡œìŠ¤ ì•„ì¹´ë°ë¯¸ 6ê¸°
* [ìŠ¤íƒ€ë²…ìŠ¤ ì•±](https://play.google.com/store/apps/details?id=com.starbucks.co&hl=ko&pli=1)ì˜ 
ì˜¨ë¼ì¸ ìŠ¤í† ì–´ ë¦¬ë¹Œë”© í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤.
* ë‹¨ìˆœ ê¸°ëŠ¥ ë³µì œê°€ ì•„ë‹Œ, DDD + Layered Architecture ê¸°ë°˜ì˜ ì²´ê³„ì  ì„¤ê³„ì™€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ê²½í—˜ì„ í†µí•´, 
MSA ë° CQRS ë„ì… í•„ìš”ì„±ì„ í•™ìŠµí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
* [ë°ì´í„°](https://github.com/4-javachip/data)ì˜ ê²½ìš° SSG.comì—ì„œ 50,000ê±´ ê°€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
* í”„ë¡œì íŠ¸ ì „ì²´ì˜ readmeë¥¼ ì›í•˜ì‹œë©´ [ì´ê³³](https://github.com/4-javachip)ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.

### ğŸ› ï¸ ì£¼ìš” ê¸°ëŠ¥
- íšŒì›ê°€ì…/ë¡œê·¸ì¸/ì†Œì…œ ë¡œê·¸ì¸
- ìƒí’ˆ/ìƒí’ˆì˜µì…˜/ì´ë²¤íŠ¸/ê¸°íšì „
- ë² ìŠ¤íŠ¸ ìƒí’ˆ
- ì£¼ë¬¸/ê²°ì œ
- ìµœê·¼ ë³¸ ìƒí’ˆ
- ëŒ“ê¸€
- ë°°ì†¡ì§€ ê´€ë¦¬
- ì°œ

## ğŸ“¦ Requirements

### âš’ Languages & Platforms
<img src="https://img.shields.io/badge/Java-007396?style=flat-square&logo=Java&logoColor=white"> <img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat-square&logo=SpringBoot&logoColor=white"> <img src="https://img.shields.io/badge/Spring Security-6DB33F?style=flat-square&logo=SpringSecurity&logoColor=white"> <img src="https://img.shields.io/badge/mysql-4479A1?style=flat-square&logo=mysql&logoColor=white"> <img src="https://img.shields.io/badge/redis-FF4438?style=flat-square&logo=redis&logoColor=white"> <img src="https://img.shields.io/badge/Python-3776AB?style=flat-square&logo=python&logoColor=white">
<br/>
<img src="https://img.shields.io/badge/Amazon Ec2-FF9900?style=flat-square&logoColor=white"> <img src="https://img.shields.io/badge/Amazon S3-569A31?style=flat-square&logoColor=white"> <img src="https://img.shields.io/badge/Github Actions-2088FF?style=flat-square&logo=githubactions&logoColor=white"> <img src="https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=docker&logoColor=white"> <img src="https://img.shields.io/badge/NginX-009639?style=flat-square&logo=nginx&logoColor=white"> <img src="https://img.shields.io/badge/Cloud Flare DNS-F38020?style=flat-square&logo=cloudflare&logoColor=white">
<br/>

### âš’ Tools
<img src="https://img.shields.io/badge/IntelliJ%20IDEA-000000?style=flat-square&logo=IntelliJ%20IDEA&logoColor=white"> <img src="https://img.shields.io/badge/Git-F05032?&style=flat-square&logo=Git&logoColor=white"/> <img src="https://img.shields.io/badge/Postman-FF6C37?&style=flat-square&logo=Postman&logoColor=white"/>
<img src="https://img.shields.io/badge/swagger-85EA2D?&style=flat-square&logo=swagger&logoColor=white"/>
<img src="https://img.shields.io/badge/Discord-5865F2?style=flat-square&logo=Discord&logoColor=white"/> 

### System Spec

| * | Specification                        |
|:------:|:-------------------------------------|
| WAS | Spring Boot 3.4.3                    |
| DB | Mysql 9.2.0                          |
| Cache | Redis 7.4.2 |
| ì–¸ì–´ | Java (JDK 17)        |
| ë¹Œë“œ ë„êµ¬ | Gradle 8.13 |
| IDE | Intellij IDEA                        |
| í˜•ìƒê´€ë¦¬ | GIT                                  |

### ğŸš€ ê¸°ìˆ  ì„ ì • ì´ìœ 
**Spring Boot**
* ê¸°ì—…ìš© ë°±ì—”ë“œ ê¸°ì¤€ìœ¼ë¡œ ë„ë¦¬ ì±„íƒë˜ì–´ ìˆê³ , Spring Security ë° ì°¨í›„ MSA í™•ì¥ì„±(Spring cloud) ë“±ì„ ê³ ë ¤í•˜ì—¬ ì„ ì •
* ìµœì‹  LTS ë²„ì „ì¸ Spring Boot 3.4.3 ì„ ì •

**Redis**
* ì¸ì¦, ìµœê·¼ ë³¸ ìƒí’ˆ, ì¿ í° ë“±ì—ì„œ ì‚¬ìš©
* ì¸ì¦ ë°ì´í„°ì˜ ë¹ ë¥¸ ì ‘ê·¼, ë§Œë£Œ ì‹œê°„ ì„¤ì •, ì¿ í°ì˜ ë™ì‹œì„± ì²˜ë¦¬ ê¸°ëŠ¥ ë“±ì„ í¸í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©

**Docker/Github Actions**
* Dockerë¥¼ í™œìš©í•´ ê°œë°œ/ìš´ì˜ í™˜ê²½ í†µì¼
* Github Actionsì™€ Discord Webhookì„ ì—°ë™í•˜ì—¬ ìë™ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬, ê²°ê³¼ ì•Œë¦¼ê¹Œì§€ ì™„ì „ ìë™í™”ëœ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

**MySQL**
* ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„° ëª¨ë¸ë§ê³¼ ë¬´ê²°ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ RDB + Spring Bootì™€ì˜ í˜¸í™˜ì„±ì„ ê³ ë ¤í•˜ì—¬ ì„ ì •
* ë‹¨, ì°¨í›„ MSA í•™ìŠµì„ ìœ„í•œ ìš©ë„ë¡œ ê° ë„ë©”ì¸ê°„ì˜ relationì€ ìµœëŒ€í•œ ëŠëŠ” ë°©í–¥ìœ¼ë¡œ í”„ë¡œì íŠ¸ ì§„í–‰

### System Architecture
![image](https://github.com/user-attachments/assets/34f415f9-ebb3-49c6-b998-c2983cfaef3f)

### CI/CD
![image](https://github.com/user-attachments/assets/1a3fdb13-a45f-4e42-8057-c068734f7105)

### ERD
![image](https://github.com/user-attachments/assets/4910721b-e95f-440c-b509-f539b4ed14f4)


## Distributing Roles
### ğŸ‘¨â€ğŸ’» Back-end
* íŒ€ì¥ ê¹€ë¯¼ì¡°: Infra, CI/CD, OAuth/Auth/User, ì•½ê´€, ìµœê·¼ ë³¸ ìƒí’ˆ, ì¿ í° ê¸°ëŠ¥ ë‹´ë‹¹
* íŒ€ì› ì¡°í˜„ì¬: ìƒí’ˆ(ì¹´í…Œê³ ë¦¬/ê¸°íšì „/ì´ë²¤íŠ¸/ë² ìŠ¤íŠ¸), í‚¤ì›Œë“œ ê²€ìƒ‰, í˜ì´ì§• ì²˜ë¦¬(QueryDSL, Cusor, Page), ëŒ“ê¸€, ì°œ ê¸°ëŠ¥ ë‹´ë‹¹
* íŒ€ì› ì •ë™ì„­: ì£¼ë¬¸/ê²°ì œ(toss payments ì—°ë™)ì…

### ğŸ—‚ï¸ í´ë” êµ¬ì¡°

```bash
src
â””â”€â”€ com.starbucks.back          # domain ê¸°ë°˜ DDD êµ¬ì¡°
    â””â”€â”€ agreement               # ì•½ê´€ ë™ì˜ 
        â”œâ”€â”€ application             # service layer
        â”œâ”€â”€ domain                  # domain
        â”œâ”€â”€ dto                     # dto      
        â”œâ”€â”€ infrastructure          # repository layer
        â”œâ”€â”€ presentation            # controller layer
        â””â”€â”€ vo                      # vo
    â”œâ”€â”€ auth                    # ì¸ì¦
    â”œâ”€â”€ banner                  # ìƒí’ˆ ë©”ì¸ ë°°ë„ˆ
    â”œâ”€â”€ best                    # ë² ìŠ¤íŠ¸ ìƒí’ˆ
    â”œâ”€â”€ cart                    # ì¥ë°”êµ¬ë‹ˆ
    â”œâ”€â”€ category                # ì¹´í…Œê³ ë¦¬
    â”œâ”€â”€ common                  # ê³µí†µ (jwt, base entity, base exception, ...)
    â”œâ”€â”€ coupon                  # ì¿ í°
    â”œâ”€â”€ dummy                   # ë”ë¯¸ ë°ì´í„°
    â”œâ”€â”€ event                   # ì´ë²¤íŠ¸ ê¸°íšì „
    â”œâ”€â”€ oauth                   # ì†Œì…œ ë¡œê·¸ì¸
    â”œâ”€â”€ option                  # ìƒí’ˆ ì˜µì…˜
    â”œâ”€â”€ order                   # ì£¼ë¬¸
    â”œâ”€â”€ payment                 # ê²°ì œ
    â”œâ”€â”€ product                 # ìƒí’ˆ
    â”œâ”€â”€ recent                  # ìµœê·¼ ë³¸ ìƒí’ˆ
    â”œâ”€â”€ review                  # ëŒ“ê¸€
    â”œâ”€â”€ season                  # ì‹œì¦Œë³„ ìƒí’ˆ
    â”œâ”€â”€ shippingaddress         # ë°°ì†¡ì§€
    â”œâ”€â”€ user                    # ìœ ì €
    â”œâ”€â”€ user_withdrwal_pending  # íšŒì› íƒˆí‡´
    â””â”€â”€ wishlist                # ì°œ
```




## âš™ï¸ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•
ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ ì•„ë˜ í•­ëª©ë“¤ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
- MySQL, Redis, S3 ì—°ê²°ì„ ìœ„í•œ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
- SMTPë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´, êµ¬ê¸€ ê³„ì •(ì´ë©”ì¼ ì „ì†¡ì)ì„ ì¤€ë¹„í•´ì•¼í•©ë‹ˆë‹¤.
- toss-payments APIë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ [toss ê°œë°œì ë¬¸ì„œ](https://developers.tosspayments.com/)ë¥¼ ì°¸ê³ í•˜ì—¬ 
toss-payments secret-key, client-keyë¥¼ ë°œê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

### ğŸ”§ í™˜ê²½ë³€ìˆ˜

<details>
<summary>application.yml</summary>

```
spring:
  datasource:
    url: {DATABASE_URL}
    username: {MYSQL_USERNAME}
    password: {MYSQL_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

  mail:
    host: smtp.gmail.com
    port: {MAIL_PORT}
    username: {GOOGLE_EMAIL}
    password: {GOOGLE_PASSWORD}
    properties:
      mail.smtp.auth: true
      mail.smtp.starttls.enable: true

  data:
    redis:
      host: {BACK_HOST_URL}
      port: {REDIS_PORT}
      username: {REDIS_USERNAME}
      password: {REDIS_PASSWORD}


  output:
    ansi:
      enabled: always

  jpa:
    hibernate:
      ddl-auto: update
      format_sql: true
    show-sql: true

    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true

JWT:
  secret-key: {JWT_SECRET_KEY}
  token:
    access-expire-time: {JWT_ACCESS_EXPIRE_TIME}
    refresh-expire-time: {JWT_REFRESH_EXPIRE_TIME}

payment:
  secret-key: {TOSS_PAYMENTS_SECRET_KEY}
  client-key: {TOSS_PAYMENTS_CLIENT_KEY}
  base-url: https://api.tosspayments.com/v1
  success-url: {FRONT_SUCCESS_URL}
  fail-url: {FRONT_FAIL_URL}
  callback-url: {TOSS_BACK_WEBHOOK_URL}

cloud:
  aws:
    credentials:
      access-key: {AWS_ACCESS_KEY}
      secret-key: {AWS_SECRET_KEY}
    region:
      static: ap-northeast-2
    s3:
      bucket: {AWS_S3_BUCKET_NAME}
    stack:
      auto: false
```



| environment | description                                    |
|:-----------:|:-----------------------------------------------|
| {DATABASE_URL} | DBì˜ URLì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                               |
| {MYSQL_USERNAME} | DBì˜ usernameì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                          |
| {MYSQL_PASSWORD} | DBì˜ passwordë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                          |
| {MAIL_PORT} | ë©”ì¼ ì„œë²„ì˜ í¬íŠ¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                             |
| {GOOGLE_EMAIL} | êµ¬ê¸€ ë©”ì¼ ê³„ì •ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                              |
| {GOOGLE_PASSWORD} | êµ¬ê¸€ ë©”ì¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                            |
| {BACK_HOST_URL} | Redis ì„œë²„ì˜ host URLì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                    |
| {REDIS_PORT} | Redis ì„œë²„ì˜ í¬íŠ¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                          |
| {REDIS_USERNAME} | Redis ì„œë²„ì˜ usernameì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                    |
| {REDIS_PASSWORD} | Redis ì„œë²„ì˜ passwordë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                    |
| {JWT_SECRET_KEY} | JWT í† í° ë°œê¸‰ì„ ìœ„í•œ secret keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”              |
| {JWT_ACCESS_EXPIRE_TIME} | JWT Access Token ë§Œë£Œ ì‹œê°„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                |
| {JWT_REFRESH_EXPIRE_TIME} | JWT Refresh Token ë§Œë£Œ ì‹œê°„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”               |
| {TOSS_PAYMENTS_SECRET_KEY} | Toss Paymentsì˜ secret keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”             |
| {TOSS_PAYMENTS_CLIENT_KEY} | Toss Paymentsì˜ client keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”             |
| {FRONT_SUCCESS_URL} | ê²°ì œ ì„±ê³µ í›„ ì´ë™í•  í”„ë¡ íŠ¸ì—”ë“œ URLì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                 |
| {FRONT_FAIL_URL} | ê²°ì œ ì‹¤íŒ¨ í›„ ì´ë™í•  í”„ë¡ íŠ¸ì—”ë“œ URLì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                 |
| {TOSS_BACK_WEBHOOK_URL} | Toss ê°€ìƒê³„ì¢Œ ê²°ì œ ì™„ë£Œ ì‹œ í˜¸ì¶œë  ë°±ì—”ë“œ webhook URLì„ ì…ë ¥í•´ ì£¼ì„¸ìš” |
| {AWS_ACCESS_KEY} | AWS ì ‘ê·¼ìš© access keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                    |
| {AWS_SECRET_KEY} | AWS ì ‘ê·¼ìš© secret keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”                    |
| {AWS_S3_BUCKET_NAME} | AWS S3 ë²„í‚· ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”                          |          |

</details>

## ğŸ“¦ Getting Started
1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone https://github.com/4-javachip/back.git
```
2. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
```bash
cd back
```
3. ë¹Œë“œ ë° ì‹¤í–‰
Linux / Mac
```bash
./gradlew build
./gradlew bootRun
```
Window
```bash
gradlew.bat build
gradlew.bat bootRun
```

4. API ë¬¸ì„œ í™•ì¸
* ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ Swagger UIë¥¼ í†µí•´ APIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* http://localhost:8080/swagger-ui/index.html








